<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>B1 Session 7: Household Chores</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',sans-serif;background:#5B5091;min-height:100vh;padding:20px}.container{max-width:800px;margin:0 auto}.header{background:#fff;border-radius:20px;padding:30px;margin-bottom:20px;text-align:center}.header h1{color:#5B5091;font-size:1.4em}.header p{color:#888}.card{background:#fff;border-radius:16px;padding:25px;margin-bottom:20px}.card h2{color:#5B5091;margin-bottom:15px}label{font-weight:600;color:#333;display:block;margin-bottom:8px}input[type="text"]{width:100%;padding:14px;border:2px solid #e0e0e0;border-radius:12px;font-size:16px;margin-bottom:15px}.btn{background:#5B5091;color:#fff;border:none;padding:14px 32px;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;width:100%;margin-top:10px}.btn:hover{background:#4a4080}.btn-orange{background:#F5A623}.section{display:none}.section.active{display:block}.reading-box{background:#f8f9fa;border-radius:12px;padding:20px;margin-bottom:20px;border-left:4px solid #5B5091;line-height:1.7}.question{background:#f8f9fa;border-radius:12px;padding:20px;margin:15px 0;border:1px solid #eee}.question h4{margin-bottom:15px;color:#333}.option{padding:14px;border:2px solid #e0e0e0;border-radius:10px;cursor:pointer;margin-bottom:10px;display:flex;align-items:center;gap:12px}.option:hover{border-color:#5B5091;background:#f8f6ff}.option.selected{border-color:#5B5091;background:#f0edff}.option.correct{border-color:#22c55e;background:#f0fdf4}.option.incorrect{border-color:#ef4444;background:#fef2f2}.circle{width:20px;height:20px;border:2px solid #ccc;border-radius:50%;flex-shrink:0}.option.selected .circle{border-color:#5B5091;background:#5B5091}textarea{width:100%;min-height:120px;padding:14px;border:2px solid #e0e0e0;border-radius:12px;font-size:16px;font-family:inherit}textarea:focus{outline:none;border-color:#5B5091}.progress{height:8px;background:#e0e0e0;border-radius:4px;margin-bottom:20px}.progress-bar{height:100%;background:#F5A623;border-radius:4px}.score-card{background:linear-gradient(135deg,#5B5091,#7B6DB5);border-radius:20px;padding:35px;color:#fff;text-align:center}.score-big{font-size:4em;font-weight:700}.scores{display:grid;grid-template-columns:repeat(5,1fr);gap:10px;margin-top:20px}.scores>div{background:rgba(255,255,255,.15);border-radius:12px;padding:12px}.scores label{font-size:.75em;opacity:.9}.scores span{font-size:1.4em;font-weight:700;display:block}.word-bank{display:flex;flex-wrap:wrap;gap:10px;padding:15px;background:#f5f5f5;border-radius:12px;margin-bottom:15px}.word{background:#fff;padding:10px 16px;border-radius:8px;cursor:pointer;border:2px solid #e0e0e0}.word:hover{border-color:#5B5091}.word.selected{border-color:#5B5091;background:#f0edff}.word.used{opacity:0.4;pointer-events:none}.drop-row{display:flex;gap:15px;align-items:center;margin-bottom:12px}.drop-def{flex:1;background:#f8f9fa;padding:14px;border-radius:8px}.drop-target{min-width:100px;min-height:44px;border:2px dashed #ccc;border-radius:8px;padding:10px;text-align:center;cursor:pointer}.drop-target:hover{border-color:#5B5091}.drop-target.filled{border-style:solid;border-color:#5B5091;background:#f8f6ff}.record-btn{width:80px;height:80px;border-radius:50%;background:#fff;border:3px solid #5B5091;cursor:pointer;margin:20px auto;display:flex;align-items:center;justify-content:center}.record-btn.recording{border-color:#ef4444;animation:pulse 1.5s infinite}.record-dot{width:24px;height:24px;background:#5B5091;border-radius:50%}.record-btn.recording .record-dot{background:#ef4444;border-radius:4px;width:20px;height:20px}@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(239,68,68,.4)}50%{box-shadow:0 0 0 15px rgba(239,68,68,0)}}.timer{text-align:center;font-size:28px;font-weight:700;color:#5B5091}.status{text-align:center;color:#666;margin-top:10px}audio{width:100%;margin-top:15px}.hidden{display:none}.feedback{background:#f8f6ff;border:1px solid #5B5091;border-radius:12px;padding:20px;margin-top:15px}

/* NEW STYLES FOR IMPROVED SUBMISSION */
.not-submitted-warning{
  background:#fef2f2;
  border:3px solid #ef4444;
  border-radius:16px;
  padding:20px;
  text-align:center;
  margin-bottom:20px;
  animation:warningPulse 2s infinite;
}
.not-submitted-warning h3{
  color:#ef4444;
  font-size:1.3em;
  margin-bottom:8px;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
}
.not-submitted-warning p{
  color:#666;
}
@keyframes warningPulse{
  0%,100%{box-shadow:0 0 0 0 rgba(239,68,68,0.3)}
  50%{box-shadow:0 0 0 10px rgba(239,68,68,0)}
}
.btn-submit-big{
  background:linear-gradient(135deg,#22c55e,#16a34a);
  color:#fff;
  border:none;
  padding:24px 40px;
  border-radius:16px;
  font-size:22px;
  font-weight:700;
  cursor:pointer;
  width:100%;
  margin-top:15px;
  box-shadow:0 6px 20px rgba(34,197,94,0.4);
  animation:submitPulse 2s infinite;
}
.btn-submit-big:hover{
  transform:translateY(-2px);
  box-shadow:0 8px 25px rgba(34,197,94,0.5);
}
@keyframes submitPulse{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.02)}
}
.submitted-success{
  background:#f0fdf4;
  border:3px solid #22c55e;
  border-radius:16px;
  padding:25px;
  text-align:center;
  margin-bottom:20px;
}
.submitted-success h3{
  color:#22c55e;
  font-size:1.4em;
  margin-bottom:8px;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
}
.submitted-success p{
  color:#666;
}
.name-input-final{
  background:#f8f9fa;
  border-radius:12px;
  padding:20px;
  margin-bottom:20px;
}
.name-input-final label{
  font-size:1.1em;
  color:#5B5091;
}
.name-input-final input{
  border:2px solid #5B5091;
}

@media(max-width:600px){.scores{grid-template-columns:repeat(3,1fr)}.drop-row{flex-direction:column}.drop-row .drop-def,.drop-row .drop-target{width:100%}.btn-submit-big{font-size:18px;padding:20px}}
</style>
</head>
<body>
<div class="container">
<div class="header">
<h1>Session 7: Household Chores</h1>
<p>Week 4 ‚Ä¢ Present Simple, Adverbs of Frequency & Imperatives</p>
</div>

<!-- REMOVED NAME INPUT AT START - Now goes directly to Section 1 -->
<div class="section active" id="s1">
<div class="card">
<div class="progress"><div class="progress-bar" style="width:20%"></div></div>
<h2>1. Reading Comprehension</h2>
<div class="reading-box">
<p><strong>Household Chores in My Family</strong></p>
<p>In my family, everyone <strong>helps</strong> with the household chores. My father <strong>always takes out</strong> the trash on Monday mornings. He <strong>never forgets</strong>!</p>
<p>My mother <strong>usually cooks</strong> dinner, but my brother <strong>sometimes helps</strong> her. I <strong>always do</strong> the dishes after dinner. I <strong>rarely complain</strong> because I like listening to music while I wash.</p>
<p>On weekends, we <strong>often clean</strong> the house together. My sister <strong>vacuums</strong> the carpet, and I <strong>mop</strong> the floor. We <strong>never leave</strong> dirty clothes on the floor - my mother <strong>always says</strong>: "<strong>Put away</strong> your clothes! <strong>Make</strong> your bed every morning!"</p>
</div>
<div id="readingQuestions"></div>
<button class="btn" onclick="checkS1()">Continue ‚Üí</button>
</div>
</div>

<div class="section" id="s2">
<div class="card">
<div class="progress"><div class="progress-bar" style="width:40%"></div></div>
<h2>2. Vocabulary - Chores Collocations</h2>
<p style="color:#666;margin-bottom:15px">Click the verb, then click where it belongs:</p>
<div class="word-bank" id="wordBank"></div>
<div id="vocabDrops"></div>
<button class="btn" onclick="checkS2()">Continue ‚Üí</button>
</div>
</div>

<div class="section" id="s3">
<div class="card">
<div class="progress"><div class="progress-bar" style="width:60%"></div></div>
<h2>3. Writing</h2>
<p style="color:#666;margin-bottom:15px">Write about who does what chores at home (6-8 sentences). Use Present Simple, adverbs of frequency, and at least one command.</p>
<p style="color:#666;margin-bottom:15px"><em>Adverbs: always, usually, often, sometimes, rarely, never</em></p>
<textarea id="writing" placeholder="In my family, I always...&#10;My mother usually...&#10;We never...&#10;Please remember to clean your room!"></textarea>
<p style="text-align:right;color:#888;margin-top:5px">Words: <span id="wc">0</span></p>
<div id="wFeedback" class="feedback hidden"></div>
<button class="btn" id="wBtn" onclick="checkWriting()">Get Feedback ‚Üí</button>
<button class="btn hidden" id="wNext" onclick="showSection('s4')">Continue ‚Üí</button>
</div>
</div>

<div class="section" id="s4">
<div class="card">
<div class="progress"><div class="progress-bar" style="width:80%"></div></div>
<h2>4. Speaking</h2>
<p style="color:#666;margin-bottom:15px">Describe the chores in your home (30-60 seconds). Who does what? How often?</p>
<p style="color:#666;margin-bottom:10px"><em>Use adverbs of frequency: always, usually, often, sometimes, rarely, never</em></p>
<div class="record-btn" id="recBtn" onclick="toggleRec()"><div class="record-dot"></div></div>
<div class="timer" id="timer">0:00</div>
<div class="status" id="recStatus">Click to start recording</div>
<audio id="audio" controls class="hidden"></audio>
<div id="sFeedback" class="feedback hidden"></div>
<button class="btn" id="sBtn" onclick="checkSpeaking()" disabled>Continue ‚Üí</button>
</div>
</div>

<div class="section" id="s5">
<div class="card">
<div class="progress"><div class="progress-bar" style="width:100%"></div></div>
<h2>5. Grammar Quiz</h2>
<div id="grammarQuestions"></div>
<button class="btn btn-orange" onclick="submitFinal()">Finish Quiz ‚úì</button>
</div>
</div>

<div class="section" id="results">
<!-- NOT SUBMITTED WARNING - Shows until submitted -->
<div class="not-submitted-warning" id="notSubmittedWarning">
<h3>‚ö†Ô∏è NOT SUBMITTED YET!</h3>
<p>Your homework is complete but NOT sent to your teacher. Enter your name and click the green button below!</p>
</div>

<!-- SUCCESS MESSAGE - Hidden until submitted -->
<div class="submitted-success hidden" id="submittedSuccess">
<h3>‚úÖ SUBMITTED SUCCESSFULLY!</h3>
<p>Your homework has been sent to your teacher. Great job!</p>
</div>

<div class="score-card">
<p style="opacity:.8">Session 7 Complete!</p>
<div class="score-big" id="finalPct">0%</div>
<div class="scores">
<div><label>Reading</label><span id="scL">0/3</span></div>
<div><label>Vocab</label><span id="scV">0/6</span></div>
<div><label>Writing</label><span id="scW">0/20</span></div>
<div><label>Speaking</label><span id="scS">0/20</span></div>
<div><label>Grammar</label><span id="scG">0/8</span></div>
</div>

<!-- NAME AND CLASS INPUT AT END -->
<div class="name-input-final" id="nameInputSection" style="margin-top:25px">
<label>üë§ Enter Your Full Name:</label>
<input type="text" id="studentName" placeholder="Your full name..." style="margin-top:10px">

<label style="margin-top:15px">üìö Select Your Class:</label>
<select id="studentClass" style="width:100%;padding:14px;border:2px solid #5B5091;border-radius:12px;font-size:16px;margin-top:10px;background:#fff;">
<option value="">-- Select your class --</option>
<option value="3072-MW-11AM">3072 - Mon/Wed 11:00 AM (Laura Ebel)</option>
<option value="3074-MW-8PM">3074 - Mon/Wed 8:00 PM (Laura Ebel)</option>
<option value="3080-TTH-11AM">3080 - Tue/Thu 11:00 AM (Laura Ebel)</option>
<option value="3082-TTH-8PM">3082 - Tue/Thu 8:00 PM (Laura Ebel)</option>
<option value="3085-TTH-945PM">3085 - Tue/Thu 9:45 PM (Eunice Salazar)</option>
</select>
</div>

<!-- BIG SUBMIT BUTTON -->
<button class="btn-submit-big" id="submitBtn" onclick="submitToTeacher()">
üì§ SUBMIT TO TEACHER
</button>

</div>
<div style="text-align:center;margin-top:20px">
<button class="btn" style="background:#fff;color:#5B5091" onclick="location.reload()">Try Again</button>
</div>
</div>
</div>

<script>
const SESSION='7';
let name='',scores={l:0,v:0,w:0,s:0,g:0},writingText='';
let selectedWord=null,isRec=false,mediaRec=null,chunks=[],recTime=0,recTimer=null;
let readingAnswers=[],grammarAnswers=[],vocabPairs=[];
let hasSubmitted=false;

const readingQBank=[
  {q:"Who takes out the trash?",opts:["The mother","The father","The brother"],correct:1},
  {q:"How often does the narrator do the dishes?",opts:["Sometimes","Usually","Always"],correct:2},
  {q:"What does the sister do on weekends?",opts:["Mops the floor","Vacuums the carpet","Cooks dinner"],correct:1},
  {q:"What does the mother always say?",opts:["Watch TV!","Put away your clothes!","Go to sleep!"],correct:1},
  {q:"Why doesn't the narrator complain about dishes?",opts:["It's easy","Listens to music","Gets paid"],correct:1}
];

const grammarQBank=[
  {q:"She _____ the dishes every night.",opts:["wash","washes","washing"],correct:1},
  {q:"They _____ clean the house on Saturdays.",opts:["always","always are","are always"],correct:0},
  {q:"_____ the bed before you leave!",opts:["Make","Makes","Making"],correct:0},
  {q:"He _____ forgets to take out the trash.",opts:["never","never is","is never"],correct:0},
  {q:"My brother rarely _____ with the cooking.",opts:["help","helps","helping"],correct:1},
  {q:"_____ put your shoes on the table!",opts:["Don't","Doesn't","Not"],correct:0},
  {q:"How often _____ you vacuum the carpet?",opts:["do","does","are"],correct:0},
  {q:"She is _____ late for dinner.",opts:["usually","usual","use"],correct:0},
  {q:"_____ your room right now!",opts:["Clean","Cleans","Cleaning"],correct:0},
  {q:"I _____ do the laundry on Sundays.",opts:["usual","usually","use to"],correct:1}
];

const vocabBank=[
  {verb:"do",noun:"the dishes"},
  {verb:"do",noun:"the laundry"},
  {verb:"make",noun:"the bed"},
  {verb:"take out",noun:"the trash"},
  {verb:"put away",noun:"the clothes"},
  {verb:"vacuum",noun:"the carpet"},
  {verb:"mop",noun:"the floor"},
  {verb:"dust",noun:"the furniture"}
];

function shuffle(arr){for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}return arr;}

function initQuestions(){
  const rQs=shuffle([...readingQBank]).slice(0,3);
  let rHTML='';
  rQs.forEach((q,i)=>{
    const shuffledOpts=q.opts.map((opt,idx)=>({text:opt,isCorrect:idx===q.correct}));
    shuffle(shuffledOpts);
    readingAnswers[i]=shuffledOpts.findIndex(o=>o.isCorrect);
    rHTML+=`<div class="question"><h4>${i+1}. ${q.q}</h4>`;
    shuffledOpts.forEach((opt,j)=>{
      rHTML+=`<div class="option" onclick="sel(this)" data-v="${j}"><div class="circle"></div>${opt.text}</div>`;
    });
    rHTML+=`</div>`;
  });
  document.getElementById('readingQuestions').innerHTML=rHTML;

  vocabPairs=shuffle([...vocabBank]).slice(0,6);
  const words=shuffle(vocabPairs.map(p=>p.verb));
  let wHTML='';
  words.forEach(w=>{wHTML+=`<div class="word" onclick="pickWord(this)">${w}</div>`;});
  document.getElementById('wordBank').innerHTML=wHTML;
  let dHTML='';
  vocabPairs.forEach(p=>{
    dHTML+=`<div class="drop-row"><div class="drop-def">_____ ${p.noun}</div><div class="drop-target" data-a="${p.verb}" onclick="dropWord(this)"></div></div>`;
  });
  document.getElementById('vocabDrops').innerHTML=dHTML;

  const gQs=shuffle([...grammarQBank]).slice(0,8);
  let gHTML='';
  gQs.forEach((q,i)=>{
    const shuffledOpts=q.opts.map((opt,idx)=>({text:opt,isCorrect:idx===q.correct}));
    shuffle(shuffledOpts);
    grammarAnswers[i]=shuffledOpts.findIndex(o=>o.isCorrect);
    gHTML+=`<div class="question" data-c="${grammarAnswers[i]}"><h4>${i+1}. ${q.q}</h4>`;
    shuffledOpts.forEach((opt,j)=>{
      gHTML+=`<div class="option" onclick="sel(this)" data-v="${j}"><div class="circle"></div>${opt.text}</div>`;
    });
    gHTML+=`</div>`;
  });
  document.getElementById('grammarQuestions').innerHTML=gHTML;
}

function showSection(id){document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));document.getElementById(id).classList.add('active');window.scrollTo(0,0);}
function sel(el){el.parentElement.querySelectorAll('.option').forEach(o=>o.classList.remove('selected'));el.classList.add('selected');}
function checkS1(){let correct=0;document.querySelectorAll('#readingQuestions .question').forEach((q,i)=>{const selected=q.querySelector('.option.selected');if(selected&&parseInt(selected.dataset.v)===readingAnswers[i])correct++;});scores.l=correct;showSection('s2');}
function pickWord(el){document.querySelectorAll('.word').forEach(w=>w.classList.remove('selected'));el.classList.add('selected');selectedWord=el;}
function dropWord(target){if(!selectedWord||target.classList.contains('filled'))return;target.textContent=selectedWord.textContent;target.classList.add('filled');selectedWord.classList.add('used');selectedWord.classList.remove('selected');selectedWord=null;}
function checkS2(){let correct=0;document.querySelectorAll('.drop-target').forEach(t=>{if(t.textContent===t.dataset.a)correct++;});scores.v=correct;showSection('s3');}
document.getElementById('writing').addEventListener('input',function(){document.getElementById('wc').textContent=this.value.trim().split(/\s+/).filter(w=>w).length;});
function checkWriting(){writingText=document.getElementById('writing').value;const text=writingText.toLowerCase();const adverbs=['always','usually','often','sometimes','rarely','never'].filter(a=>text.includes(a)).length;const chores=['dishes','laundry','bed','trash','clean','vacuum','mop','dust','cook','wash'].filter(c=>text.includes(c)).length;const imperatives=text.match(/^[A-Z][a-z]+\s|!\s*$/gm)?.length||0;scores.w=Math.min(20,adverbs*3+chores*2+imperatives*2);document.getElementById('wFeedback').innerHTML='<b>Feedback:</b> Found '+adverbs+' adverbs of frequency, '+chores+' chore words.<br><b>Score: '+scores.w+'/20</b>';document.getElementById('wFeedback').classList.remove('hidden');document.getElementById('wBtn').classList.add('hidden');document.getElementById('wNext').classList.remove('hidden');}
async function toggleRec(){if(!isRec){try{const stream=await navigator.mediaDevices.getUserMedia({audio:true});mediaRec=new MediaRecorder(stream);chunks=[];mediaRec.ondataavailable=e=>chunks.push(e.data);mediaRec.onstop=()=>{document.getElementById('audio').src=URL.createObjectURL(new Blob(chunks,{type:'audio/webm'}));document.getElementById('audio').classList.remove('hidden');document.getElementById('sBtn').disabled=false;};mediaRec.start();isRec=true;recTime=0;document.getElementById('recBtn').classList.add('recording');document.getElementById('recStatus').textContent='Recording... Click again to stop';recTimer=setInterval(()=>{recTime++;document.getElementById('timer').textContent=Math.floor(recTime/60)+':'+(recTime%60).toString().padStart(2,'0');},1000);}catch(e){alert('Microphone error: '+e.message);}}else{mediaRec.stop();mediaRec.stream.getTracks().forEach(t=>t.stop());clearInterval(recTimer);isRec=false;document.getElementById('recBtn').classList.remove('recording');document.getElementById('recStatus').textContent='Recording saved!';}}
function checkSpeaking(){scores.s=recTime>=30?20:recTime>=20?15:recTime>=10?10:5;document.getElementById('sFeedback').innerHTML='<b>Duration:</b> '+Math.floor(recTime/60)+':'+(recTime%60).toString().padStart(2,'0')+'<br><b>Score: '+scores.s+'/20</b>';document.getElementById('sFeedback').classList.remove('hidden');showSection('s5');}
function submitFinal(){let correct=0;document.querySelectorAll('#grammarQuestions .question').forEach((q,i)=>{const sel=q.querySelector('.option.selected');const ans=parseInt(q.dataset.c);if(sel){if(parseInt(sel.dataset.v)===ans){correct++;sel.classList.add('correct');}else{sel.classList.add('incorrect');q.querySelector('[data-v="'+ans+'"]').classList.add('correct');}}});scores.g=correct;const total=scores.l+scores.v+scores.w+scores.s+scores.g;const pct=Math.round(total/57*100);document.getElementById('finalPct').textContent=pct+'%';document.getElementById('scL').textContent=scores.l+'/3';document.getElementById('scV').textContent=scores.v+'/6';document.getElementById('scW').textContent=scores.w+'/20';document.getElementById('scS').textContent=scores.s+'/20';document.getElementById('scG').textContent=scores.g+'/8';showSection('results');}

function submitToTeacher(){
  name=document.getElementById('studentName').value.trim();
  const studentClass=document.getElementById('studentClass').value;
  
  if(!name){
    alert('‚ö†Ô∏è Please enter your name before submitting!');
    document.getElementById('studentName').focus();
    return;
  }
  if(!studentClass){
    alert('‚ö†Ô∏è Please select your class before submitting!');
    document.getElementById('studentClass').focus();
    return;
  }
  
  const pct=Math.round((scores.l+scores.v+scores.w+scores.s+scores.g)/57*100);
  const url='https://docs.google.com/forms/d/e/1FAIpQLSf9uEs5MqWLveyoaMBxeWx3pW1b90siwgaom766CpwqnOI7Dg/viewform?usp=pp_url&entry.518151516='+encodeURIComponent(name)+'&entry.864654596='+encodeURIComponent(SESSION)+'&entry.258952242='+encodeURIComponent(scores.l+'/3')+'&entry.859150584='+encodeURIComponent(scores.v+'/6')+'&entry.1121796741='+encodeURIComponent(scores.w+'/20')+'&entry.1435469716='+encodeURIComponent(scores.s+'/20')+'&entry.1998281944='+encodeURIComponent(scores.g+'/8')+'&entry.1207114914='+encodeURIComponent(pct+'%')+'&entry.939912807='+encodeURIComponent(writingText)+'&entry.1234567890='+encodeURIComponent(studentClass);
  
  window.open(url,'_blank');
  
  // Show success, hide warning
  hasSubmitted=true;
  document.getElementById('notSubmittedWarning').classList.add('hidden');
  document.getElementById('submittedSuccess').classList.remove('hidden');
  document.getElementById('submitBtn').style.display='none';
  document.getElementById('nameInputSection').style.display='none';
}

// Initialize questions on page load
initQuestions();
</script>
</body>
</html>
